<!DOCTYPE html>
<html>
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  
  <title>Z - Computer &amp; Programming Technology</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="google-adsense-account" content="ca-pub-8768699638326268">
  <meta name="description" content="Blog for computer technology.">
<meta property="og:type" content="website">
<meta property="og:title" content="Z - Computer &amp; Programming Technology">
<meta property="og:url" content="http://zvz.im/page/2/index.html">
<meta property="og:site_name" content="Z - Computer &amp; Programming Technology">
<meta property="og:description" content="Blog for computer technology.">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="darluc">
<meta name="twitter:card" content="summary">
  
    <link rel="alternative" href="/atom.xml" title="Z - Computer &amp; Programming Technology" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.geekzu.org/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
<link rel="stylesheet" href="/css/style.css">

  
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-8NRBEZPWYN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-8NRBEZPWYN');
</script>


  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8768699638326268"
     crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 6.3.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
    <div id="wrap">
      <div class="outer">
        <section id="main">
  
    <article id="post-go-goroutine-and-preemption" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2020/03/11/go-goroutine-and-preemption/">Go：Goroutine 的抢占机制</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2020/03/11/go-goroutine-and-preemption/" class="article-date">
  <time datetime="2020-03-11T01:16:02.000Z" itemprop="datePublished">2020-03-11</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/tags/golang/">golang</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://img.zvz.im/imgs/2020/03/f1eb2d0c781c6429.png" alt=""></p>
<p>ℹ︎<em>本文内容基于 Go 1.13 版本。</em></p>
<p>Go 语言利用内部的调度器管理 goroutine。这个调度器致力于对 goroutine 进行切换，确保它们都能够获得执行时间。不过，调度器有时会抢占这些 goroutine 的运行时间以保证正确的轮换。</p>
        
          <p class="article-more-link">
            <a href="/2020/03/11/go-goroutine-and-preemption/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>


  
    <article id="post-top-10-golang-mistakes" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/11/09/top-10-golang-mistakes/">Go 项目最常见的 10 种错误</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2019/11/09/top-10-golang-mistakes/" class="article-date">
  <time datetime="2019-11-09T16:59:25.000Z" itemprop="datePublished">2019-11-09</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/tags/golang/">golang</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://img.zvz.im/imgs/2019/10/19578038f26ae531.jpg" alt=""></p>
<p>本文是我总结的 golang 项目中最常见的十种错误。排名不分先后。</p>
<h2 id="未知状态的枚举值"><a href="#未知状态的枚举值" class="headerlink" title="未知状态的枚举值"></a>未知状态的枚举值</h2><p>我们来看一个简单的例子：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Status <span class="type">uint32</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">	StatusOpen Status = <span class="literal">iota</span></span><br><span class="line">	StatusClosed</span><br><span class="line">	StatusUnknown</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>在这里我们使用 <code>iota</code>  创建了一个枚举列表，结果状态如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">StatusOpen = <span class="number">0</span></span><br><span class="line">StatusClosed = <span class="number">1</span></span><br><span class="line">StatusUnknown = <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>现在，假设这个 <code>Status</code> 类型是 JSON 请求数据中的一部分，并且会被用于编码解码。我们可以设计一个结构，如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Request <span class="keyword">struct</span> &#123;</span><br><span class="line">	ID        <span class="type">int</span>    <span class="string">`json:&quot;Id&quot;`</span></span><br><span class="line">	Timestamp <span class="type">int</span>    <span class="string">`json:&quot;Timestamp&quot;`</span></span><br><span class="line">	Status    Status <span class="string">`json:&quot;Status&quot;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
          <p class="article-more-link">
            <a href="/2019/11/09/top-10-golang-mistakes/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>


  
    <article id="post-real-world-concurrency-bugs-in-golang" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/25/real-world-concurrency-bugs-in-golang/">理解现实中 Go 语言的并发漏洞</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2019/07/25/real-world-concurrency-bugs-in-golang/" class="article-date">
  <time datetime="2019-07-25T17:12:12.000Z" itemprop="datePublished">2019-07-25</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/tags/golang/">golang</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>对于编程（数据）模型的设计不仅会使得一些问题变得易于（或更难）解决，也会导致某些类型的漏洞更容易（或更难）产生、侦测和修复。本文的研究对象就是 Go 语言的并发机制。在深入研究之前先思考一下会更有意思，你现在对 Go 语言可能会有以下几点认识：</p>
<ul>
<li>Go 语言明显是被设计为服务于并发编程的，想要使其变得更简单且不易出错</li>
<li>Go 语言确实让并发编程变更简单且不易出错了</li>
<li>Go 程序大量使用 channel 的消息传递机制，相较于共享内存的同步机制，它更不容易出错</li>
<li>Go 程序的并发漏洞更少</li>
<li>Go 语言内置的对于死锁和数据竞争的侦测能捕获所有（绝大多数）的代码漏洞</li>
</ul>
<p>这些陈述中的第一点是毋庸置疑的。至于其它几点，你可以先参考本文的研究数据，再重新评估一下你还会有多坚决地继续持有这些观点…</p>
        
          <p class="article-more-link">
            <a href="/2019/07/25/real-world-concurrency-bugs-in-golang/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>


  
    <article id="post-golang-writing-unit-tests" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/03/09/golang-writing-unit-tests/">Go 语言基础 - 编写单元测试</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2019/03/09/golang-writing-unit-tests/" class="article-date">
  <time datetime="2019-03-09T01:23:45.000Z" itemprop="datePublished">2019-03-09</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/tags/golang/">golang</a> <a class="article-category-link" href="/tags/testing/">testing</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>在上一篇文章 <a target="_blank" rel="noopener" href="http://blog.alexellis.io/golang-json-api-client/">“Grab JSON from an API”</a> 中，我们探索了如何使用 HTTP 客户端以及如何解析 JSON 数据。本篇文章是 Go 语言主题的续篇，讲述如何编写单元测试。</p>
<h2 id="1-Go-语言中的测试"><a href="#1-Go-语言中的测试" class="headerlink" title="1. Go 语言中的测试"></a>1. Go 语言中的测试</h2><p>Go 语言有一个自带的测试命令 <code>go test</code> ，还有一个标准 <code>testing</code> 测试包，它能够为你提供一个小却完整的测试体验。</p>
<p>这套标准工具链还包括了基准测试以及基于语句的代码覆盖率测试，类似与 NCover(.Net) 或者 Istanbul(Node.js)。</p>
<h2 id="1-2-编写测试代码"><a href="#1-2-编写测试代码" class="headerlink" title="1.2 编写测试代码"></a>1.2 编写测试代码</h2><p>和 Go 语言其它方面如格式化、命名规则一样，Go 语言的单元测试也显得个性十足。它的语法刻意规避了使用断言模式，并将值验证和行为检测的工作留给了开发人员。<br>
        
          <p class="article-more-link">
            <a href="/2019/03/09/golang-writing-unit-tests/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>


  
    <article id="post-parsing-json-in-golang" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/02/18/parsing-json-in-golang/">如何使用 Go 语言解析 JSON</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2019/02/18/parsing-json-in-golang/" class="article-date">
  <time datetime="2019-02-18T01:17:13.000Z" itemprop="datePublished">2019-02-18</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/tags/golang/">golang</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>当静态编程语言使用到 JSON 的时候，总是会有些费力。一方面，JSON 数据可能是任何形式的，从一个简单的数字，到一个复杂的包含内嵌对象的数组。当使用 Go 语言的时候，这意味着你要将这些变化多端的 JSON 数据放入结构化的变量中去。</p>
<p>幸运地是，Go 尽力尝试帮我们降低编码难度，为我们提供了许多方式来解析 JSON 数据。</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>Go 标准库的 json 包为我们提供了我们想要的功能。对于任意的 JSON 字符串，标准的解析方法如下：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;encoding/json&quot;</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ... </span></span><br><span class="line">myJsonString := <span class="string">`&#123;&quot;some&quot;:&quot;json&quot;&#125;`</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// `&amp;myStoredVariable` is the address of the variable we want to store our</span></span><br><span class="line"><span class="comment">// parsed data in</span></span><br><span class="line">json.Unmarshall([]<span class="type">byte</span>(myJsonString), &amp;myStoredVariable)</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure>
<p>本文中我们要讨论的是，对于 <code>myStoredVariable</code> 变量的类型，你可以有哪些不同的选择，以及决定何时采用何种类型。<br>
        
          <p class="article-more-link">
            <a href="/2019/02/18/parsing-json-in-golang/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>


  
    <article id="post-go-tensorflow" class="article article-type-post" itemscope itemprop="blogPost">
  
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/15/go-tensorflow/">使用 Go 语言学会 Tensorflow</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      <a href="/2018/07/15/go-tensorflow/" class="article-date">
  <time datetime="2018-07-15T00:51:03.000Z" itemprop="datePublished">2018-07-15</time>
</a>
      
  <div class="article-category">
    <a class="article-category-link" href="/tags/golang/">golang</a> <a class="article-category-link" href="/tags/tensorflow/">tensorflow</a>
  </div>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>Tensorflow 并不是一个专门用于机器学习的库，相反的，它是一个通用的用于图计算的库。它的核心部分是用 C++ 实现的，同时还有其它语言的接口库。Go 语言版本的接口库与 Python 版本的并不一样，它不仅有助于我们使用 Go 语言调用 Tensorflow，同时有助于我们了解 Tensorflow 的底层实现。</p>
<p><img src="https://img.zvz.im/imgs/2019/06/e18bb51e93eb9b04.jpg" alt=""><br>
        
          <p class="article-more-link">
            <a href="/2018/07/15/go-tensorflow/#more">More...</a>
          </p>
        
      

      
        
    </div>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/">&amp;laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/">Next &amp;raquo;</a>
    </nav>
  
</section>
        <aside id="sidebar">
  <nav class="menus">
  	<ul>
  		<li><a href="/"><i class="icon icon-home"></i></a></li>
  		
			<li><a href="/archives"><i class="icon icon-fenlei"></i></a></li>
  		
  		
			<li><a href="/tags"><i class="icon icon-tag"></i></a></li>
  		
  		
  	</ul>
  </nav>
  <a id="go-top" href="#"><i class="icon icon-up"></i></a>
</aside>
      </div>
      <footer id="footer">
  
	<div id="footer-info" class="inner">
	Linked with:&nbsp;&nbsp;&nbsp; 
	<a href="http://mritd.me" target="_blank">mritd.me</a>&nbsp;&nbsp;&nbsp;
	<a href="https://www.mghio.cn" target="_blank">mghio's blog</a>&nbsp;&nbsp;&nbsp;
	<a href="https://sillydong.com" target="_blank">傻东の学习笔记</a>&nbsp;&nbsp;&nbsp;
	</div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/tags" class="mobile-nav-link">Tag</a>
  
</nav>
    
<script>
  var disqus_shortname = 'imzvz';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script>

<script>
  if(window.notIndexPage)
  $(function(){
    $.get('//manage.zvz.im/api/posts/adv', function(res) {
      if(res.data.length) {
        $.each(res.data, function(idx, adv) {
          if(idx == 0) {
            if($('h2:first').length > 0) {
              $(adv).insertBefore('h2:first');
              return;
            }
          }
          $(adv).insertAfter('.article-inner');
        });
      }
    });
  });
</script>



  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/require.min.js"></script>


<script src="/js/script.js"></script>



<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>



  </div><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({{ JSON.stringify(config) }});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="{{ src }}">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->
</body>
</html>